@page "/weather-forecast"
@using Vetero.Client.Components
@using Vetero.Shared.ViewModels.Rapid.ForecastItems;
@inject IApiBroker broker

@if (forecast == null)
{
    <p>Loading....</p>
}
else
{
    <WeatherDisplay forecastDay="forecastDay" forecast="forecast" avgCurrent="avgCurrent" />
}
@code {
    private ForecastWeather forecast;
    private IEnumerable<Forecastday> forecastDay;
    private Forecastday avgCurrent;
    protected override async Task OnInitializedAsync()
    {
        await base.OnInitializedAsync();
        forecast = await broker.GetForecastWeatherAsync("Siedlce", null, 14, null);
        forecastDay = forecast.forecast.forecastday;
        avgCurrent = forecastDay.FirstOrDefault();
    }
}